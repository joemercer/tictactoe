<head>
  <title>tictactoe</title>
  <link href='http://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
</head>

<body>
  {{> partials}}
</body>

<template name="partials">

	<div class="container">
		{{#if partial 'loggedOut'}}
			{{> loggedOut}}
		{{else}} {{#if partial 'loggedIn'}}
	  	{{> loggedIn}}
	  {{/if}} {{/if}}
	</div>

</template>


<template name="loggedOut">
	<h2>Who do you want to play as?</h2>
	<button id="login-x">X</button>
	<button id="login-o">O</button>
</template>


<template name="loggedIn">
	<div class="row header">
		<div class="col-sm-8">
			<h1 class="title">Tic Tac Code!</h1>
			{{> stats}}
		</div>
		<div class="col-sm-4">
			{{> board}}
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			{{> newScript}}
		</div>
	</div>
	<div class="row">
		<div class="col-sm-12">
			{{> scripts}}
		</div>
	</div>
</template>

<template name="stats">
	<div class="col-md-4">
		<h3>Wins: {{wins}}</h3>
	</div>
	<div class="col-md-4">
		<h3>Losses: {{losses}}</h3>
	</div>
	<div class="col-md-4">
		<h3>Ties: {{ties}}</h3>
	</div>
</template>

<template name="newScript">
	{{> aceEditor}}
	<br>
  <input class="submit-new-script" type="button" value="submit code" />
</template>

<template name="aceEditor">
	{{#constant}}
		<div id='aceEditor'>
function(move, board){
	if (move.row === 1 && move.column === 1) {
		move.weight = 1;
	}
	if (board[1][1] === 'x') {
		if (move.row === 0 && move.column === 0) {
			move.weight = 1;
		}
	}
}
		</div>
	{{/constant}}
</template>

<template name="scripts">
	<ol>
		{{#each scripts}}
			<li>{{logic}} <input class="activate-script" type="button" value="{{active}}" /></li>
		{{/each}}
	</ol>
</template>

<template name="board">
	<div class="grid-container">
		{{#if winner}}
			<div class="grid-message-cover">
				<span></span>
			</div>
			<div class="grid-message">
				{{winner}}
			</div>
		{{/if}}
		{{#each rows}}
			<div class="grid-row">
				{{#each this}}
					<div class="grid-cell"><div class="grid-cell-message">{{this}}</div></div>
				{{/each}}
			</div>
		{{/each}}
	</div>
</template>

